<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" xml:lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Google Map Polygon Sandbox</title>
    <link rel="stylesheet" href="../css/lib/redmond/jquery-ui-1.8.16.custom.css" type="text/css" media="all" />
    <link rel="stylesheet" href="../css/simplicity/simplicityMapShapeCreatorUi.css" type="text/css" media="all" />
    <style type="text/css">
      #container { width: 400px; }
      #map { width: 100%; height: 400px; border: 2px dashed red; }
      #ui { padding: 4px 4px; width: 394px; }
    </style>
  </head>
  <body>
    <h1><a href="../index.html">home</a> | Google Map Polygon Sandbox</h1>
    <div id="container" style="float: left">
      <div id="map"></div>
      <span id="ui" class="ui-widget-header ui-corner-all ui-helper-clearfix"></span>
      <input id="geoJSON" type="hidden" name="placemark"/>
    </div>
    <fieldset style="float: left; margin-left: 1em;">
      <legend>State</legend>
      <textarea id="state" cols="30" rows="40"></textarea>
    </fieldset>
    <fieldset style="float: left; margin-left: 1em;">
      <legend>geoJSON</legend>
      <textarea id="shape" cols="30" rows="40"></textarea>
    </fieldset>
    <script type="text/javascript" src="../js/lib/jquery-1.6.4.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/lib/jquery-ui-1.8.16.custom.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/lib/jquery.ba-bbq-1.2.1.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/lib/json2.js" charset="utf-8"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?libraries=geometry&sensor=false"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityEquiv.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityProxy.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityWidget.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityState.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityInputs.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityHistory.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityGoogleMap.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityGoogleGeocoder.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityMapShapeCreator.js"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityMapShapeCreatorRadiusAsSelectUi.js"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityMapShapeCreatorUi.js"></script>
    <script type="text/javascript" src="../js/simplicity/simplicityGoogleShapeCreator.js"></script>
    <script type="text/javascript">//<![CDATA[
      $(function () {
        $('body').simplicityState();

        $('#map').simplicityGoogleMap({
          mapOptions: {
          center: new google.maps.LatLng(40.69847032728747, -73.9514422416687),
          zoom: 10,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          disableDoubleClickZoom: true
        }});
        var creator = $('#map').simplicityGoogleShapeCreator({
          debug: false,
          input: '#geoJSON',
          stateTriggerShapes: ['Polygon']
        });
        $('#ui').simplicityMapShapeCreatorUi({
          shapeCreator: creator,
          input: '#geoJSON',
          allowedShapes: ['Point', 'MultiPoint', 'LineString', 'Polygon']
        });

        $('body').bind('simplicityStateChange', function (evt, state) {
          $('#state').val(JSON.stringify(state, null, '  '));
        });
        $('#state').change(function (evt) {
          var val = $(evt.target).val().trim();
          $('body').simplicityState('state', JSON.parse(val ? val : '{}'));
        });
        creator.bind('simplicitymapshapecreatorshapechange', function (evt, ui) {
          var geoJSON = ui.geoJSON;
          if ('undefined' !== typeof geoJSON) {
            $('#shape').val(JSON.stringify(geoJSON, null, '  '));
          }
        });
        $('body')
        .simplicityState('mergeQueryParams')
        .simplicityHistory({
          debug: false
        })
       .simplicityState('triggerChangeEvent');
      });
    //]]></script>
  </body>
</html>
